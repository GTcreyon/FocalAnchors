const focalAnchors={attrNameContainer:"focal-anchors-has",attrNameHighlight:"focal-anchor-is",classNameHighlight:"focal-anchor",toggleAnchors:function(t){const e=document.getElementById(t);e.hasAttribute(focalAnchors.attrNameContainer)?focalAnchors.clearAnchors(e):focalAnchors.addAnchorsToContainer(e)},clearAnchors:function(t){const e=[t];for(;e.length>0;){const t=e.pop();focalAnchors.unmarkElement(t),Array.from(t.childNodes).forEach(t=>{if(t.nodeType!==Node.TEXT_NODE&&(t.hasAttribute(focalAnchors.attrNameContainer)&&e.push(t),t.hasAttribute(focalAnchors.attrNameHighlight))){const e=t.previousSibling,n=t.nextSibling;null!==e&&e.nodeType===Node.TEXT_NODE?(e.textContent+=t.textContent,n.nodeType===Node.TEXT_NODE&&(e.textContent+=n.textContent,t.parentNode.removeChild(n))):null!==n&&n.nodeType===Node.TEXT_NODE?n.textContent+=t.textContent:t.parentNode.insertBefore(document.createTextNode(t.textContent),t),t.parentNode.removeChild(t)}})}},addAnchorsToContainer:function(t){const e=[t];for(;e.length>0;){const t=e.pop();Array.from(t.childNodes).forEach(t=>{t.nodeType===Node.TEXT_NODE?(focalAnchors.markElement(t.parentNode),focalAnchors.injectAnchorText(t),t.parentNode.removeChild(t)):t.hasAttribute(focalAnchors.attrNameHighlight)||e.push(t)})}},injectAnchorText:function(t){const e=t.textContent.split(" ");for(let t=0;t<e.length;t++){let n=e[t];const o=n.replaceAll(/\W/g,"").length,r=Math.min(Math.ceil(o/2),2);n=o>0?'<b class="'+focalAnchors.classNameHighlight+'" '+focalAnchors.attrNameHighlight+">"+n.substring(0,r)+"</b>"+n.substring(r):"",e[t]=n}const n=document.createElement("span");n.innerHTML=e.join(" "),Array.from(n.childNodes).forEach(e=>{t.parentNode.insertBefore(e,t)}),n.remove()},markElement:function(t){t.setAttribute(focalAnchors.attrNameContainer,"")},unmarkElement:function(t){t.removeAttribute(focalAnchors.attrNameContainer)}};
//github.com/GTcreyon/FocalAnchors